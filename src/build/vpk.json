{
  "$schema": "https://raw.githubusercontent.com/nuke-build/nuke/master/source/Nuke.Tooling.Generator/schema.json",
  "references": [
    "https://docs.velopack.io/reference/cli"
  ],
  "name": "Velopack",
  "officialUrl": "https://docs.velopack.io/",
  "help": "Velopack creates installers and auto-update packages for cross-platform desktop apps.",
  "nugetPackageId": "vpk",
  "packageExecutable": "vpk.dll|vpk.exe",
  "tasks": [
    {
      "help": "Creates platform release packages (`vpk [windows|linux] pack`).",
      "postfix": "Pack",
      "definiteArgument": "pack",
      "officialUrl": "https://docs.velopack.io/reference/cli",
      "settingsClass": {
        "properties": [
          {
            "name": "Channel",
            "type": "string",
            "format": "[{value}]",
            "help": "Platform channel: 'windows' or 'linux'"
          },
          {
            "name": "PackId",
            "type": "string",
            "format": "-u={value}",
            "help": "App bundle ID"
          },
          {
            "name": "PackVersion",
            "type": "string",
            "format": "-v={value}",
            "help": "App version"
          },
          {
            "name": "PackDir",
            "type": "string",
            "format": "-p={value}",
            "position": 1,
            "help": "App files directory"
          },
          {
            "name": "OutputDir",
            "type": "string",
            "format": "-o={value}",
            "help": "Output directory"
          },
          {
            "name": "Runtime",
            "type": "string",
            "format": "-r={value}",
            "help": "Target runtime"
          },
          {
            "name": "MainExe",
            "type": "string",
            "format": "-e={value}",
            "help": "Main executable name"
          },
          {
            "name": "UniqueIdentifier",
            "type": "string",
            "format": "-u={value}",
            "help": "The unique identifier"
          },
          {
            "name": "PackTitle",
            "type": "string",
            "format": "--packTitle={value}",
            "help": "The title to use in the shortcut"
          }
        ]
      }
    },
    {
      "help": "Downloads latest release from GitHub (`vpk [windows|linux] download github`).",
      "postfix": "DownloadGithub",
      "definiteArgument": "download github",
      "officialUrl": "https://docs.velopack.io/reference/cli",
      "settingsClass": {
        "properties": [
          {
            "name": "Channel",
            "type": "string",
            "format": "[{value}]",
            "help": "Platform channel: 'windows' or 'linux'"
          },
          {
            "name": "RepoUrl",
            "type": "string",
            "format": "--repoUrl={value}",
            "help": "GitHub repository URL (e.g. https://github.com/{GitHubActions.Instance.Repository})"
          },
          {
            "name": "Token",
            "type": "string",
            "format": "--token={value}",
            "secret": true,
            "help": "GitHub OAuth token (e.g. {GitHubToken})"
          },
          {
            "name": "OutputDir",
            "type": "string",
            "format": "-o={value}",
            "help": "Output directory [default: Releases]"
          },
          {
            "name": "Pre",
            "type": "bool",
            "format": "--pre",
            "help": "Get latest pre-release instead of stable"
          }
        ]
      }
    },
    {
      "help": "Generates delta patch (`vpk [windows|linux] delta generate`).",
      "postfix": "DeltaGenerate",
      "definiteArgument": "delta generate",
      "settingsClass": {
        "properties": [
          {
            "name": "Channel",
            "type": "string",
            "format": "[{value}]",
            "help": "Platform channel: 'windows' or 'linux'"
          },
          {
            "name": "Base",
            "type": "string",
            "format": "-b={value}",
            "position": 1,
            "help": "Base package"
          },
          {
            "name": "New",
            "type": "string",
            "format": "-n={value}",
            "help": "New package"
          },
          {
            "name": "Output",
            "type": "string",
            "format": "-o={value}",
            "help": "Output path"
          }
        ]
      }
    },
    {
      "help": "Uploads to GitHub (`vpk [windows|linux] upload github`).",
      "postfix": "UploadGithub",
      "definiteArgument": "upload github",
      "settingsClass": {
        "properties": [
          {
            "name": "Channel",
            "type": "string",
            "format": "[{value}]",
            "help": "Platform channel: 'windows' or 'linux'"
          },
          {
            "name": "RepoUrl",
            "type": "string",
            "format": "--repoUrl={value}",
            "help": "GitHub repository URL"
          },
          {
            "name": "Token",
            "type": "string",
            "format": "--token={value}",
            "secret": true,
            "help": "GitHub OAuth token"
          },
          {
            "name": "OutputDir",
            "type": "string",
            "format": "-o={value}",
            "position": 1,
            "help": "Packages directory"
          },
          {
            "name": "Publish",
            "type": "bool",
            "format": "--publish",
            "help": "Publish the release"
          }
        ]
      }
    }
  ],
  "commonTaskProperties": [
    {
      "name": "Verbose",
      "type": "bool",
      "format": "--verbose",
      "help": "Print diagnostic messages"
    },
    {
      "name": "Yes",
      "type": "bool",
      "format": "-y",
      "help": "Auto-confirm prompts"
    },
    {
      "name": "LegacyConsole",
      "type": "bool",
      "format": "-x",
      "help": "Disable colors"
    },
    {
      "name": "SkipUpdates",
      "type": "bool",
      "format": "--skip-updates",
      "help": "Skip vpk updates"
    }
  ]
}
